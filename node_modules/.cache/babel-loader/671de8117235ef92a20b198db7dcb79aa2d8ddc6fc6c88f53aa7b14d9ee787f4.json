{"ast":null,"code":"var _jsxFileName = \"/home/developer/Desktop/TestTask1/flipkart_scrapper_frontend/src/components/Search.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport ProductService from '../services/product';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Search(props) {\n  _s();\n  let setProducts = props.setProducts;\n  const products = props.products;\n  const [data, setData] = useState({});\n  const [debouncedData, setDebouncedData] = useState({});\n  const handleChange = e => {\n    const newValue = e.target.value;\n    setData({\n      url: newValue\n    });\n\n    // Clear the previous timeout whenever a new change occurs\n    if (debouncedData.timeoutId) {\n      clearTimeout(debouncedData.timeoutId);\n    }\n\n    // Set a new timeout to update debouncedData after a delay\n    const newTimeoutId = setTimeout(() => {\n      setDebouncedData({\n        url: newValue,\n        timeoutId: null\n      });\n    }, 3000);\n    setDebouncedData({\n      url: newValue,\n      timeoutId: newTimeoutId\n    });\n  };\n  useEffect(() => {\n    // Check if debouncedData.url exists before making the API call\n    if (debouncedData.url) {\n      ProductService.scrape_url(debouncedData).then(res => {\n        if (!products.some(hash => hash.id === res.data.id)) {\n          setProducts([...products, res.data]);\n        }\n      });\n    }\n  }, [debouncedData.url]); // Only trigger the effect when debouncedData.url changes\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App d-flex justify-content-center align-items-center\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"w-50 p-4 bg-light rounded\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"exampleInputEmail1\",\n          className: \"mb-2\",\n          children: \"Enter url here\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"form-control mb-4\",\n          onChange: handleChange,\n          id: \"exampleInputEmail1\",\n          \"aria-describedby\": \"emailHelp\",\n          placeholder: \"http://example.com/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        children: \"Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}\n_s(Search, \"RbUOQaC9oZYUIs4L2eBnJtIZz7E=\");\n_c = Search;\nvar _c;\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["React","useState","useEffect","ProductService","jsxDEV","_jsxDEV","Search","props","_s","setProducts","products","data","setData","debouncedData","setDebouncedData","handleChange","e","newValue","target","value","url","timeoutId","clearTimeout","newTimeoutId","setTimeout","scrape_url","then","res","some","hash","id","className","children","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","onChange","placeholder","type","_c","$RefreshReg$"],"sources":["/home/developer/Desktop/TestTask1/flipkart_scrapper_frontend/src/components/Search.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport ProductService from '../services/product';\n\nexport default function Search(props) {\n  \n  let setProducts = props.setProducts\n  const products = props.products\n  const [data, setData] = useState({});\n  const [debouncedData, setDebouncedData] = useState({});\n  \n  const handleChange = (e) => {\n    const newValue = e.target.value;\n    setData({ url: newValue });\n\n    // Clear the previous timeout whenever a new change occurs\n    if (debouncedData.timeoutId) {\n      clearTimeout(debouncedData.timeoutId);\n    }\n\n    // Set a new timeout to update debouncedData after a delay\n    const newTimeoutId = setTimeout(() => {\n      setDebouncedData({ url: newValue, timeoutId: null });\n    }, 3000);\n    \n    setDebouncedData({ url: newValue, timeoutId: newTimeoutId });\n  }\n\n  useEffect(() => {\n    // Check if debouncedData.url exists before making the API call\n    if (debouncedData.url) {\n      ProductService.scrape_url(debouncedData).then(res => {\n        if (!products.some(hash => hash.id === res.data.id)) {\n          setProducts([...products, res.data])\n        }          \n      });\n    }\n  }, [debouncedData.url]); // Only trigger the effect when debouncedData.url changes\n\n  return (\n    <div className=\"App d-flex justify-content-center align-items-center\">\n      <form className=\"w-50 p-4 bg-light rounded\">\n        <div className=\"form-group\">\n          <label htmlFor=\"exampleInputEmail1\" className='mb-2'>Enter url here</label>\n          <input className=\"form-control mb-4\" onChange={handleChange} id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" placeholder=\"http://example.com/\"/>          \n        </div>        \n        <button type=\"submit\" className=\"btn btn-primary\">Search</button>\n      </form>\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}